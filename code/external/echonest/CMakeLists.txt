#Setup directory paths
SET(ROOT ${CMAKE_CURRENT_SOURCE_DIR})
SET(HEADERS ${ROOT}/headers)
SET(SOURCES ${ROOT}/sources)

#Set version
set(ECHONEST_VERSION_MAJOR "1")
set(ECHONEST_VERSION_MINOR "2")
set(ECHONEST_VERSION_PATCH "0")
set(ECHONEST_VERSION "${ECHONEST_VERSION_MAJOR}.${ECHONEST_VERSION_MINOR}.${ECHONEST_VERSION_PATCH}")
set(ECHONEST_SONAME_VERSION "${ECHONEST_VERSION_MAJOR}.${ECHONEST_VERSION_MINOR}")

#Initiate source files
FILE(GLOB ECHONEST_HEADERS ${SOURCES}/*.h)
FILE(GLOB ECHONEST_SOURCES ${SOURCES}/*.cpp)

#Create library
ADD_LIBRARY(echonest SHARED ${ECHONEST_HEADERS} ${ECHONEST_SOURCES})
SET_TARGET_PROPERTIES(echonest PROPERTIES VERSION ${ECHONEST_VERSION} SOVERSION ${ECHONEST_SONAME_VERSION})
TARGET_LINK_LIBRARIES(echonest ${QT_QTCORE_LIBRARIES} ${QT_QTNETWORK_LIBRARY} qjson)

#Install file
INSTALL(TARGETS echonest DESTINATION external/echonest)
