#Setup directory paths
SET(ROOT ${CMAKE_CURRENT_SOURCE_DIR})
SET(HEADERS ${ROOT}/headers)
SET(LIBRARIES64 ${ROOT}/libraries/64bit)
SET(LIBRARIES32 ${ROOT}/libraries/32bit)
SET(ECHONEST_LIBRARY_LOCATION ${CMAKE_INSTALL_PREFIX}/external/echonest CACHE INTERNAL "Echonest library install directory")

IF(${SYSTEM} STREQUAL "WINDOWS")
	FILE(GLOB VI_ECHONEST_LIBRARY_CURRENT ${LIBRARIES32}/echonest.dll)
ELSEIF(${SYSTEM} STREQUAL "MACOSX")
	SET(VI_ECHONEST_LIBRARY_CURRENT ${LIBRARIES32}/libechonest.dylib)
ELSEIF(${SYSTEM} STREQUAL "LINUX")
	IF(${ARCHITECTURE} STREQUAL "32bit")
		SET(VI_ECHONEST_LIBRARY_CURRENT ${LIBRARIES32}/libechonest.so)
	ELSEIF(${ARCHITECTURE} STREQUAL "64bit")
		SET(VI_ECHONEST_LIBRARY_CURRENT ${LIBRARIES64}/libechonest.so)
	ENDIF()
ELSE()
	MESSAGE(ERROR " The Echonest library can only be installed on Unix, Apple and Windows systems.")
ENDIF()

#Find the library and create the global variable
INSTALL(FILES ${VI_ECHONEST_LIBRARY_CURRENT} DESTINATION external/echonest)
FIND_LIBRARY(ECHONEST_LIBRARY NAMES echonest.lib echonest PATHS ${PROJECT_BINARY_DIR}/external/echonest)
