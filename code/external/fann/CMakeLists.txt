#Setup directory paths
SET(ROOT ${CMAKE_CURRENT_SOURCE_DIR})
SET(HEADERS ${ROOT}/headers)
SET(SOURCES ${ROOT}/sources)

#Initiate source files
FILE(GLOB FANN_SOURCES ${HEADERS}/*.h)
IF(${DETECT_GPU_AVAILABLE})
	INCLUDE_DIRECTORIES(${OPENCL_INCLUDE_DIRS})
	ADD_DEFINITIONS(-DGPU="${DETECT_GPU_AVAILABLE}")
	FILE(GLOB FANN_HEADERS ${SOURCES}/floatfann.c ${SOURCES}/fann_cl.c)
ELSE()
	FILE(GLOB FANN_HEADERS ${SOURCES}/floatfann.c)
ENDIF()

#Create library
ADD_LIBRARY(fann SHARED ${FANN_SOURCES} ${FANN_HEADERS})
IF(${DETECT_GPU_AVAILABLE})
	TARGET_LINK_LIBRARIES(fann ${OPENCL_LIBRARIES})
ENDIF()

#Install file
INSTALL(TARGETS fann DESTINATION external)
