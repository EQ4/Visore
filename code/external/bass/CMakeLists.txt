#Setup directory paths
SET(ROOT ${CMAKE_CURRENT_SOURCE_DIR})
SET(HEADERS ${ROOT}/headers)
SET(LIBRARIES ${ROOT}/libraries)
SET(LIBRARIES64 ${ROOT}/libraries/64bit)
SET(LIBRARIES32 ${ROOT}/libraries/32bit)
SET(PLUGINS ${ROOT}/libraries/plugins)
SET(PLUGINS64 ${ROOT}/libraries/plugins/64bit)
SET(PLUGINS32 ${ROOT}/libraries/plugins/32bit)
SET(BASSLIBRARYLOCATION ${CMAKE_INSTALL_PREFIX}/external/bass CACHE INTERNAL "Bass library install location")
SET(BASSPLUGINSLOCATION ${CMAKE_INSTALL_PREFIX}/external/bass/plugins CACHE INTERNAL "Bass plugins install location")

IF(WIN32)
	SET(VI_BASS_LIBRARY_INSTALL ${BASSLIBRARYLOCATION}/bass.dll CACHE INTERNAL "Bass library install location")
	SET(VI_BASS_LIBRARY_CURRENT ${LIBRARIES32}/bass.dll)
	FILE(GLOB VI_BASS_PLUGINS ${PLUGINS32}/*.dll)
ELSEIF(APPLE)
	SET(VI_BASS_LIBRARY_INSTALL ${BASSLIBRARYLOCATION}/libbass.dylib CACHE INTERNAL "Bass library install location")
	SET(VI_BASS_LIBRARY_CURRENT ${LIBRARIES32}/libbass.dylib)
	FILE(GLOB VI_BASS_PLUGINS ${PLUGINS32}/*.dylib)
ELSEIF(UNIX)
	SET(VI_BASS_LIBRARY_INSTALL ${BASSLIBRARYLOCATION}/libbass.so CACHE INTERNAL "Bass library install location")
	IF(${ARCHITECTURE} STREQUAL "32bit")
		SET(VI_BASS_LIBRARY_CURRENT ${LIBRARIES32}/libbass.so)
		FILE(GLOB VI_BASS_PLUGINS ${PLUGINS32}/*.so)
	ELSEIF(${ARCHITECTURE} STREQUAL "64bit")
		SET(VI_BASS_LIBRARY_CURRENT ${LIBRARIES64}/libbass.so)
		FILE(GLOB VI_BASS_PLUGINS ${PLUGINS64}/*.so)
	ENDIF()
ELSE()
	MESSAGE(ERROR "The Bass library can only be installed on Unix, Apple and Windows systems.")
ENDIF()

#Install file
FILE(COPY ${VI_BASS_LIBRARY_CURRENT} DESTINATION ${BASSLIBRARYLOCATION})
FILE(COPY ${VI_BASS_PLUGINS} DESTINATION ${BASSPLUGINSLOCATION})
