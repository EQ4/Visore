#Setup directory paths
SET(ROOT ${CMAKE_CURRENT_SOURCE_DIR})
SET(HEADERS ${ROOT}/headers)
SET(LIBRARIES ${ROOT}/libraries)
SET(LIBRARIES64 ${ROOT}/libraries/64bit)
SET(LIBRARIES32 ${ROOT}/libraries/32bit)
SET(PLUGINS ${ROOT}/libraries/plugins)
SET(PLUGINS64 ${ROOT}/libraries/plugins/64bit)
SET(PLUGINS32 ${ROOT}/libraries/plugins/32bit)
SET(BASS_LIBRARY_LOCATION ${CMAKE_INSTALL_PREFIX}/external/bass CACHE INTERNAL "Bass library install directory")
SET(BASS_PLUGINS_LOCATION ${CMAKE_INSTALL_PREFIX}/external/bass/plugins CACHE INTERNAL "Bass plugins install directory")

IF(WIN32)
	SET(VI_BASS_LIBRARY_INSTALL ${BASS_LIBRARY_LOCATION}/bass.lib CACHE INTERNAL "Bass library")
	SET(VI_BASSENC_LIBRARY_INSTALL ${BASS_LIBRARY_LOCATION}/bassenc.dll CACHE INTERNAL "Bass encoder library install directory")
	IF(${ARCHITECTURE} STREQUAL "32bit")
		FILE(GLOB VI_BASS_LIBRARY_CURRENT ${LIBRARIES32}/bass.dll ${LIBRARIES32}/bass.lib)
		#SET(VI_BASSENC_LIBRARY_CURRENT ${LIBRARIES32}/bassenc.dll)
	ELSEIF(${ARCHITECTURE} STREQUAL "64bit")
		FILE(GLOB VI_BASS_LIBRARY_CURRENT ${LIBRARIES64}/bass.dll ${LIBRARIES64}/bass.lib)
		#SET(VI_BASSENC_LIBRARY_CURRENT ${LIBRARIES64}/bassenc.dll)
		FILE(GLOB VI_BASS_PLUGINS64 ${PLUGINS64}/*.dll)
	ENDIF()
	FILE(GLOB VI_BASS_PLUGINS32 ${PLUGINS32}/*.dll)
ELSEIF(APPLE)
	SET(VI_BASS_LIBRARY_INSTALL ${BASS_LIBRARY_LOCATION}/libbass.dylib CACHE INTERNAL "Bass library install directory")
	SET(VI_BASSENC_LIBRARY_INSTALL ${BASS_LIBRARY_LOCATION}/libbassenc.dylib CACHE INTERNAL "Bass encoder library install directory")
	SET(VI_BASS_LIBRARY_CURRENT ${LIBRARIES32}/libbass.dylib)
	#SET(VI_BASSENC_LIBRARY_CURRENT ${LIBRARIES32}/libbassenc.dylib)
	FILE(GLOB VI_BASS_PLUGINS32 ${PLUGINS32}/*.dylib)
ELSEIF(UNIX)
	SET(VI_BASS_LIBRARY_INSTALL ${BASS_LIBRARY_LOCATION}/libbass.so CACHE INTERNAL "Bass library install directory")
	SET(VI_BASSENC_LIBRARY_INSTALL ${BASS_LIBRARY_LOCATION}/libbassenc.so CACHE INTERNAL "Bass encoder library install directory")
	IF(${ARCHITECTURE} STREQUAL "32bit")
		SET(VI_BASS_LIBRARY_CURRENT ${LIBRARIES32}/libbass.so)
		#SET(VI_BASSENC_LIBRARY_CURRENT ${LIBRARIES32}/libbassenc.so)
		FILE(GLOB VI_BASS_PLUGINS32 ${PLUGINS32}/*.so)
	ELSEIF(${ARCHITECTURE} STREQUAL "64bit")
		SET(VI_BASS_LIBRARY_CURRENT ${LIBRARIES64}/libbass.so)
		#SET(VI_BASSENC_LIBRARY_CURRENT ${LIBRARIES64}/libbassenc.so)
		FILE(GLOB VI_BASS_PLUGINS64 ${PLUGINS64}/*.so)
	ENDIF()
ELSE()
	MESSAGE(ERROR "The Bass library can only be installed on Unix, Apple and Windows systems.")
ENDIF()

#Install file
FILE(COPY ${VI_BASS_LIBRARY_CURRENT} DESTINATION ${BASS_LIBRARY_LOCATION})
FILE(COPY ${VI_BASSENC_LIBRARY_CURRENT} DESTINATION ${BASS_LIBRARY_LOCATION})
#First copy 32bit libraries. If the library is available in 64bit, it is overwritten.
FILE(COPY ${VI_BASS_PLUGINS32} DESTINATION ${BASS_PLUGINS_LOCATION})
FILE(COPY ${VI_BASS_PLUGINS64} DESTINATION ${BASS_PLUGINS_LOCATION})
